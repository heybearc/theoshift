(()=>{var e={};e.id=2523,e.ids=[2523,2888,660],e.modules={9385:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>y,default:()=>j,getServerSideProps:()=>N,getStaticPaths:()=>D,getStaticProps:()=>w,reportWebVitals:()=>S,routeModule:()=>$,unstable_getServerProps:()=>E,unstable_getServerSideProps:()=>k,unstable_getStaticParams:()=>q,unstable_getStaticPaths:()=>C,unstable_getStaticProps:()=>P});var r={};s.r(r),s.d(r,{default:()=>v,getServerSideProps:()=>f});var a=s(7093),i=s(5244),n=s(1323),l=s(2899),o=s.n(l),c=s(6814),u=s(997),d=s(3227),m=s(6847),x=s(1649),p=s(6689),g=s(1163),h=s(1664),b=s.n(h);function v(){let{data:e}=(0,x.useSession)(),t=(0,g.useRouter)(),[s,r]=(0,p.useState)([]),[a,i]=(0,p.useState)(!0),[n,l]=(0,p.useState)(""),o=async e=>{try{(await fetch("/api/events/select",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:e})})).ok?t.push(`/events/${e}`):l("Failed to select event")}catch(e){l("Error selecting event"),console.error("Error selecting event:",e)}},c=e=>{switch(e){case"current":return"bg-green-100 text-green-800 border-green-200";case"upcoming":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},d=e=>{switch(e){case"current":return"\uD83D\uDFE2";case"upcoming":return"\uD83D\uDD35";case"past":return"⚪";default:return"❓"}};return a?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700",children:(0,u.jsxs)("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),u.jsx("p",{className:"text-white text-lg",children:"Loading events..."})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700",children:(0,u.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[u.jsx("div",{className:"flex justify-end mb-4",children:u.jsx("button",{onClick:()=>(0,x.signOut)({callbackUrl:"/auth/signin"}),className:"bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:"\uD83D\uDEAA Sign Out"})}),(0,u.jsxs)("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"\uD83C\uDFAF Select Event"}),u.jsx("p",{className:"text-blue-100 text-lg",children:"Choose which event you'd like to work with"}),e?.user?.name&&(0,u.jsxs)("p",{className:"text-blue-200 mt-2",children:["Welcome back, ",e.user.name,"!"]})]}),n&&u.jsx("div",{className:"max-w-2xl mx-auto mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n}),u.jsx("div",{className:"max-w-6xl mx-auto",children:0===s.length?u.jsx("div",{className:"text-center",children:(0,u.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-auto",children:[u.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC5"}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Events Available"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"There are no events available for you to select."}),e?.user?.role==="ADMIN"&&u.jsx(b(),{href:"/admin/events",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create New Event"})]})}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>u.jsx("div",{className:"bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>o(e.id),children:(0,u.jsxs)("div",{className:"p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsxs)("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full border ${c(e.status)}`,children:[d(e.status)," ",e.status.toUpperCase()]}),u.jsx("span",{className:"text-sm text-gray-500",children:e.eventType})]}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.name}),e.description&&u.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),(0,u.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,u.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[u.jsx("span",{className:"mr-2",children:"\uD83D\uDCC5"}),new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),(0,u.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[u.jsx("span",{className:"mr-2",children:"\uD83D\uDCCD"}),e.location]})]}),(0,u.jsxs)("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[(0,u.jsxs)("span",{children:["\uD83D\uDC65 ",e.attendantsCount," attendants"]}),(0,u.jsxs)("span",{children:["\uD83D\uDCCB ",e.positionsCount," positions"]})]}),u.jsx("button",{onClick:t=>{t.stopPropagation(),o(e.id)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Select Event"})]})},e.id))})}),e?.user?.role==="ADMIN"&&(0,u.jsxs)("div",{className:"text-center mt-8",children:[u.jsx(b(),{href:"/admin",className:"inline-flex items-center px-6 py-3 bg-white text-blue-600 font-medium rounded-lg hover:bg-gray-50 transition-colors mr-4",children:"\uD83D\uDEE1️ Admin Dashboard"}),u.jsx(b(),{href:"/events",className:"inline-flex items-center px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors",children:"\uD83D\uDCC5 Manage Events"})]})]})})}let f=async e=>{let t=await (0,d.getServerSession)(e.req,e.res,m.L);return t?(t.user?.role,{props:{}}):{redirect:{destination:"/auth/signin",permanent:!1}}},j=(0,n.l)(r,"default"),w=(0,n.l)(r,"getStaticProps"),D=(0,n.l)(r,"getStaticPaths"),N=(0,n.l)(r,"getServerSideProps"),y=(0,n.l)(r,"config"),S=(0,n.l)(r,"reportWebVitals"),P=(0,n.l)(r,"unstable_getStaticProps"),C=(0,n.l)(r,"unstable_getStaticPaths"),q=(0,n.l)(r,"unstable_getStaticParams"),E=(0,n.l)(r,"unstable_getServerProps"),k=(0,n.l)(r,"unstable_getServerSideProps"),$=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/events/select",pathname:"/events/select",bundlePath:"",filename:""},components:{App:c.default,Document:o()},userland:r})},6814:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(997),a=s(1649);function i({Component:e,pageProps:{session:t,...s}}){return r.jsx(a.SessionProvider,{session:t,children:r.jsx(e,{...s})})}s(6764)},6847:(e,t,s)=>{"use strict";s.d(t,{L:()=>x});var r=s(3227),a=s.n(r),i=s(7449),n=s.n(i),l=s(7652),o=s(8432),c=s.n(o),u=s(2048),d=s.n(u);let m=e=>{let t=new Date().toISOString(),s=`[${t}] ${e}
`;try{d().appendFileSync("/tmp/nextauth-debug.log",s)}catch(e){}},x={providers:[n()({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){try{if(m(`Starting authorization for: ${e?.email}`),!e?.email||!e?.password)return m("Missing credentials"),null;m("Looking up user in database...");let t=await l.prisma.users.findUnique({where:{email:e.email}});if(!t)return m(`User not found: ${e.email}`),null;if(!t.passwordHash)return m("User has no password hash"),null;m("Comparing password...");let s=await c().compare(e.password,t.passwordHash);if(m(`Password valid: ${s}`),!s)return m(`Invalid password for: ${e.email}`),null;return m(`Authentication successful for: ${t.email}`),{id:t.id,email:t.email,name:`${t.firstName} ${t.lastName}`,image:t.image||null,role:t.role}}catch(e){return m(`Error during authorization: ${e}`),null}}})],session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:t})=>(t&&(e.role=t.role,e.image=t.image),e),session:async({session:e,token:t})=>(t&&(e.user.id=t.sub,e.user.role=t.role),e)},pages:{signIn:"/auth/signin"}};a()(x)},7652:(e,t,s)=>{"use strict";s.r(t),s.d(t,{prisma:()=>a});var r=s(3524);let a=globalThis.prisma??new r.PrismaClient},6764:()=>{},3524:e=>{"use strict";e.exports=require("@prisma/client")},8432:e=>{"use strict";e.exports=require("bcryptjs")},3227:e=>{"use strict";e.exports=require("next-auth")},7449:e=>{"use strict";e.exports=require("next-auth/providers/credentials")},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[2899,8342,1664],()=>s(9385));module.exports=r})();