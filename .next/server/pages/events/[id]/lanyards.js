(()=>{var e={};e.id=9336,e.ids=[9336,2888,660],e.modules={5638:(e,r,t)=>{"use strict";t.r(r),t.d(r,{config:()=>S,default:()=>j,getServerSideProps:()=>C,getStaticPaths:()=>k,getStaticProps:()=>w,reportWebVitals:()=>E,routeModule:()=>P,unstable_getServerProps:()=>L,unstable_getServerSideProps:()=>T,unstable_getStaticParams:()=>O,unstable_getStaticPaths:()=>D,unstable_getStaticProps:()=>A});var s={};t.r(s),t.d(s,{default:()=>v,getServerSideProps:()=>f});var a=t(7093),n=t(5244),l=t(1323),i=t(2899),d=t.n(i),o=t(6814),c=t(997),u=t(3227),m=t(5175),x=t(9927),p=t(6689),h=t(1664),b=t.n(h),g=t(1163),y=t(968),N=t.n(y);function v({eventId:e,event:r,lanyards:t,attendants:s,lanyardSettings:a,stats:n}){let l=(0,g.useRouter)(),[i,d]=(0,p.useState)(!1),[o,u]=(0,p.useState)(""),[m,h]=(0,p.useState)(!1),[y,v]=(0,p.useState)(""),[f,j]=(0,p.useState)(null),[w,k]=(0,p.useState)(""),[C,S]=(0,p.useState)(!1),[E,A]=(0,p.useState)(!1),[D,O]=(0,p.useState)(null),[L,T]=(0,p.useState)({circuitConvention:"",assemblyOverseerName:"",attendantOverseerName:"",phone:"",lanyardsReceivedBy:"",lanyardsReturnedTo:"",lanyardsToRecover:""}),[P,$]=(0,p.useState)({badgeNumber:"",notes:""}),[_,I]=(0,p.useState)({startNumber:1,endNumber:10,prefix:"",notes:""}),q=async r=>{r.preventDefault();try{(await fetch(`/api/event-lanyards/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).ok?($({badgeNumber:"",notes:""}),S(!1),l.reload()):u("Failed to create lanyard")}catch(e){u("Error creating lanyard"),console.error("Error:",e)}},B=e=>{O(e),$({badgeNumber:e.badgeNumber,notes:e.notes||""}),S(!0)},R=async r=>{if(r.preventDefault(),D)try{(await fetch(`/api/event-lanyards/${e}/${D.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).ok?($({badgeNumber:"",notes:""}),S(!1),O(null),l.reload()):u("Failed to update lanyard")}catch(e){u("Error updating lanyard"),console.error("Error:",e)}},F=async r=>{if(confirm("Are you sure you want to delete this lanyard?"))try{(await fetch(`/api/event-lanyards/${e}/${r}`,{method:"DELETE"})).ok?l.reload():u("Failed to delete lanyard")}catch(e){u("Error deleting lanyard"),console.error("Error:",e)}},M=e=>{v(e),h(!0),j(null),k("")},U=async()=>{if(f&&y)try{let r=`${f.users.firstName} ${f.users.lastName}`;(await fetch(`/api/event-lanyards/${e}/${y}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"CHECKED_OUT",isCheckedOut:!0,checkedOutTo:r,checkedOutAt:new Date().toISOString(),notes:f.users.phone||""})})).ok?(h(!1),l.reload()):u("Failed to check out lanyard")}catch(e){u("Error checking out lanyard"),console.error("Error:",e)}},H=async r=>{try{(await fetch(`/api/event-lanyards/${e}/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"AVAILABLE",isCheckedOut:!1,checkedOutTo:null,checkedOutAt:null,checkedInAt:new Date().toISOString(),notes:null})})).ok?l.reload():u("Failed to check in lanyard")}catch(e){u("Error checking in lanyard"),console.error("Error:",e)}},W=async r=>{r.preventDefault();try{let{startNumber:r,endNumber:t,prefix:s,notes:a}=_,n=[];for(let l=r;l<=t;l++){let r=s?`${s}${l}`:l.toString();try{let t=await fetch(`/api/event-lanyards/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({badgeNumber:r,notes:a})});if(t.ok)n.push({success:!0,badgeNumber:r});else{let e=await t.json();n.push({success:!1,badgeNumber:r,error:e.error||"Unknown error"})}}catch(e){n.push({success:!1,badgeNumber:r,error:e instanceof Error?e.message:"Network error"})}}let i=n.filter(e=>e.success).length,d=n.filter(e=>!e.success);if(i>0){I({startNumber:1,endNumber:10,prefix:"",notes:""}),A(!1),l.reload();let e=`Successfully created ${i} lanyards`;d.length>0&&(e+=`

Failed to create ${d.length} lanyards:`,d.forEach(r=>{e+=`
- ${r.badgeNumber}: ${r.error}`})),alert(e)}else u("Failed to create any lanyards"),console.error("All lanyard creation failed:",n)}catch(e){u("Error creating bulk lanyards"),console.error("Error:",e)}},V=()=>{$({badgeNumber:"",notes:""}),S(!1),A(!1),O(null)},J=e=>({AVAILABLE:"bg-green-100 text-green-800",CHECKED_OUT:"bg-blue-100 text-blue-800",LOST:"bg-red-100 text-red-800",DAMAGED:"bg-yellow-100 text-yellow-800"})[e]||"bg-gray-100 text-gray-800";return i?c.jsx(x.Z,{title:"Loading Lanyards...",breadcrumbs:[{label:"Events",href:"/events"},{label:"Loading..."}],children:c.jsx("div",{className:"max-w-7xl mx-auto",children:(0,c.jsxs)("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),c.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})}):o?c.jsx(x.Z,{title:"Lanyards - Error",breadcrumbs:[{label:"Events",href:"/events"},{label:"Lanyards"}],children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-6 rounded-lg shadow-sm",children:(0,c.jsxs)("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,c.jsxs)("div",{className:"ml-4 flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Unable to Load Lanyards"}),c.jsx("div",{className:"text-sm text-red-700 mb-4",children:c.jsx("p",{children:o})}),(0,c.jsxs)("div",{className:"flex gap-3",children:[(0,c.jsxs)(b(),{href:"/events",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:[c.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Events"]}),(0,c.jsxs)("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",children:[c.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})]})]})})})}):(0,c.jsxs)(c.Fragment,{children:[c.jsx(N(),{children:c.jsx("style",{children:`
          @media print {
            @page { margin: 0.5in; }
            body { print-color-adjust: exact; -webkit-print-color-adjust: exact; }
            .print\\:hidden { display: none !important; }
            button, .no-print { display: none !important; }
            table { page-break-inside: auto; }
            tr { page-break-inside: avoid; page-break-after: auto; }
            thead { display: table-header-group; }
          }
        `})}),(0,c.jsxs)(x.Z,{title:`Lanyards - ${r?.name||"Event"}`,breadcrumbs:[{label:"Events",href:"/events"},{label:r?.name||"Event",href:`/events/${e}`},{label:"Lanyards"}],children:[c.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:(0,c.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 print:shadow-none print:border-0 print:p-8",children:[c.jsx("h2",{className:"text-xl font-bold text-center mb-8 print:text-3xl print:underline print:mb-12",children:"Attendant Lanyard Tracking"}),(0,c.jsxs)("div",{className:"space-y-3 print:space-y-4 print:ml-8",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[200px,1fr] gap-2 items-center",children:[c.jsx("label",{className:"font-semibold text-gray-700",children:"Date:"}),c.jsx("div",{className:"print:border-b print:border-black print:min-h-[28px] print:pl-2",children:r?.startDate?new Date(r.startDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[200px,1fr] gap-2 items-center",children:[c.jsx("label",{className:"font-semibold text-gray-700",children:"Circuit/Convention:"}),c.jsx("input",{type:"text",value:L.circuitConvention,onChange:e=>T({...L,circuitConvention:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md print:border-0 print:border-b print:border-black print:p-0 print:pl-2",placeholder:"e.g., OH 19B"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[200px,1fr] gap-2 items-center",children:[c.jsx("label",{className:"font-semibold text-gray-700",children:"Assembly Overseer/ CC Name:"}),c.jsx("input",{type:"text",value:L.assemblyOverseerName,onChange:e=>T({...L,assemblyOverseerName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md print:border-0 print:border-b print:border-black print:p-0 print:pl-2",placeholder:"Enter name"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[200px,1fr] gap-2 items-center",children:[c.jsx("label",{className:"font-semibold text-gray-700",children:"Attendant Overseer Name:"}),c.jsx("input",{type:"text",value:L.attendantOverseerName,onChange:e=>T({...L,attendantOverseerName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md print:border-0 print:border-b print:border-black print:p-0 print:pl-2",placeholder:"Enter name"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[200px,1fr] gap-2 items-center",children:[c.jsx("label",{className:"font-semibold text-gray-700",children:"Phone:"}),c.jsx("input",{type:"tel",value:L.phone,onChange:e=>T({...L,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md print:border-0 print:border-b print:border-black print:p-0 print:pl-2",placeholder:"216-469-8897"})]})]}),(0,c.jsxs)("div",{className:"mt-8 space-y-3 print:mt-12 print:space-y-4",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[300px,1fr] gap-2 items-center",children:[c.jsx("label",{className:"font-semibold text-gray-700",children:"Number of Lanyards received by AH:"}),c.jsx("input",{type:"text",value:L.lanyardsReceivedBy,onChange:e=>T({...L,lanyardsReceivedBy:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md print:border-0 print:border-b print:border-black print:p-0 print:pl-2"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[300px,1fr] gap-2 items-center",children:[c.jsx("label",{className:"font-semibold text-gray-700",children:"Lanyards returned to AH:"}),c.jsx("input",{type:"text",value:L.lanyardsReturnedTo,onChange:e=>T({...L,lanyardsReturnedTo:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md print:border-0 print:border-b print:border-black print:p-0 print:pl-2"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[300px,1fr] gap-2 items-center",children:[c.jsx("label",{className:"font-semibold text-gray-700",children:"Lanyards to recover and return:"}),c.jsx("input",{type:"text",value:L.lanyardsToRecover,onChange:e=>T({...L,lanyardsToRecover:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md print:border-0 print:border-b print:border-black print:p-0 print:pl-2"})]})]}),c.jsx("div",{className:"mt-8 pt-4 border-t print:mt-12 print:pt-6 print:border-t-2 print:border-black",children:c.jsx("p",{className:"text-sm italic text-gray-600 print:text-base",children:"Prior to your assembly, list trained attendants alphabetically for quick check-out/check-in."})})]})}),(0,c.jsxs)("div",{className:"max-w-7xl mx-auto",children:[c.jsx("div",{className:"mb-6",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Event Lanyards"}),(0,c.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["Manage lanyards for ",r?.name]})]}),(0,c.jsxs)("div",{className:"flex space-x-3",children:[c.jsx(b(),{href:`/events/${e}`,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"← Back to Event"}),c.jsx("button",{type:"button",onClick:()=>S(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"+ Add Lanyard"}),c.jsx("button",{type:"button",onClick:()=>{console.log("Bulk Create clicked"),A(!0)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:"\uD83D\uDCE6 Bulk Create"}),c.jsx("button",{type:"button",onClick:()=>window.print(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors",children:"\uD83D\uDCC4 Export to PDF"})]})]})}),C&&(0,c.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:D?"Edit Lanyard":"Add New Lanyard"}),(0,c.jsxs)("form",{onSubmit:D?R:q,className:"space-y-4",children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,c.jsxs)("div",{children:[c.jsx("label",{htmlFor:"badgeNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Badge Number *"}),c.jsx("input",{type:"text",id:"badgeNumber",value:P.badgeNumber,onChange:e=>$({...P,badgeNumber:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., L001, A-1, etc.",required:!0})]})}),(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:D?"Update Lanyard":"Create Lanyard"})]})]})]}),E&&(0,c.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Bulk Create Lanyards"}),(0,c.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{htmlFor:"prefix",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prefix (Optional)"}),c.jsx("input",{type:"text",id:"prefix",value:_.prefix,onChange:e=>I({..._,prefix:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., L, A-, etc."})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{htmlFor:"startNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Number *"}),c.jsx("input",{type:"number",id:"startNumber",value:_.startNumber,onChange:e=>I({..._,startNumber:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",required:!0})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{htmlFor:"endNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Number *"}),c.jsx("input",{type:"number",id:"endNumber",value:_.endNumber,onChange:e=>I({..._,endNumber:parseInt(e.target.value)||10}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",required:!0})]})]}),c.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:(0,c.jsxs)("p",{className:"text-sm text-gray-600",children:[c.jsx("strong",{children:"Preview:"})," Will create ",Math.max(0,_.endNumber-_.startNumber+1)," lanyards:",_.prefix,_.startNumber," to ",_.prefix,_.endNumber]})}),(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,c.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",disabled:_.endNumber<_.startNumber,children:["Create ",Math.max(0,_.endNumber-_.startNumber+1)," Lanyards"]})]})]})]}),m&&c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:c.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,c.jsxs)("div",{className:"mt-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Check Out Lanyard"}),(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"attendantSearch",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Attendant"}),c.jsx("input",{type:"text",id:"attendantSearch",value:w,onChange:e=>k(e.target.value),placeholder:"Search attendants...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),w&&c.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md",children:s.filter(e=>{let r=`${e.users.firstName} ${e.users.lastName}`.toLowerCase(),t=(e.role||e.users.role||"").toLowerCase(),s=e.users.email.toLowerCase(),a=w.toLowerCase();return r.includes(a)||t.includes(a)||s.includes(a)}).map(e=>(0,c.jsxs)("div",{onClick:()=>{j(e),k(`${e.users.firstName} ${e.users.lastName}`)},className:"p-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",children:[(0,c.jsxs)("div",{className:"font-medium text-gray-900",children:[e.users.firstName," ",e.users.lastName]}),(0,c.jsxs)("div",{className:"text-sm text-gray-600",children:[e.role||e.users.role," • ",e.users.email,e.users.phone&&(0,c.jsxs)("span",{className:"ml-2",children:["\uD83D\uDCDE ",e.users.phone]})]})]},e.id))})]}),(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:U,disabled:!f,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-md transition-colors",children:"Check Out"})]})]})})}),(0,c.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,c.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Lanyards (",t.length,")"]})}),0===t.length?c.jsx("div",{className:"p-6 text-center",children:(0,c.jsxs)("div",{className:"text-gray-500",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),c.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No lanyards"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new lanyard."}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:()=>S(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"+ Add Lanyard"})})]})}):c.jsx("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge Number"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Checked Out"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone Number"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,c.jsxs)("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.badgeNumber}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${J(e.status)}`,children:e.status})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.isCheckedOut?(0,c.jsxs)("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:e.checkedOutTo||"Unknown"}),c.jsx("div",{className:"text-gray-500 text-xs",children:e.checkedOutAt?new Date(e.checkedOutAt).toLocaleDateString():""}),e.notes&&(0,c.jsxs)("div",{className:"text-blue-600 text-xs",children:["\uD83D\uDCDE ",e.notes]})]}):c.jsx("span",{className:"text-gray-400",children:"Available"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.notes||"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,c.jsxs)("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>B(e),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),e.isCheckedOut?c.jsx("button",{onClick:()=>H(e.id),className:"text-orange-600 hover:text-orange-900",children:"Check In"}):c.jsx("button",{onClick:()=>M(e.id),className:"text-green-600 hover:text-green-900",children:"Check Out"}),c.jsx("button",{onClick:()=>F(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id))})]})})]})]})]})]})}let f=async e=>{if(!await (0,u.getServerSession)(e.req,e.res,m.L))return{redirect:{destination:"/auth/signin",permanent:!1}};let{id:r}=e.params;try{let{prisma:e}=await Promise.resolve().then(t.bind(t,8925)),s=await e.events.findUnique({where:{id:r},include:{lanyard_settings:{include:{lanyards:{orderBy:[{badgeNumber:"asc"}]}}},event_attendant_associations:{include:{users:{select:{id:!0,firstName:!0,lastName:!0,email:!0,phone:!0}}}}}});if(!s)return{notFound:!0};let a={id:s.id,name:s.name,eventType:s.eventType,startDate:s.startDate?.toISOString()||null,endDate:s.endDate?.toISOString()||null,status:s.status},n=s.lanyard_settings?.lanyards?.map(e=>({id:e.id,badgeNumber:e.badgeNumber,status:e.isCheckedOut?"CHECKED_OUT":"AVAILABLE",notes:e.notes,isCheckedOut:e.isCheckedOut,checkedOutTo:e.checkedOutTo,checkedOutAt:e.checkedOutAt?.toISOString()||null,checkedInAt:e.checkedInAt?.toISOString()||null,createdAt:e.createdAt?.toISOString()||null,updatedAt:e.updatedAt?.toISOString()||null}))||[],l=s.event_attendant_associations.filter(e=>e.users).map(e=>({id:e.id,users:{id:e.users.id,firstName:e.users.firstName,lastName:e.users.lastName,email:e.users.email,role:"ATTENDANT",phone:e.users.phone},role:"ATTENDANT"}));return{props:{eventId:r,event:a,lanyards:n,attendants:l,lanyardSettings:s.lanyard_settings?{id:s.lanyard_settings.id,totalLanyards:s.lanyard_settings.totalLanyards,availableLanyards:s.lanyard_settings.availableLanyards,isActive:s.lanyard_settings.isActive}:null,stats:{total:n.length,available:n.filter(e=>!e.isCheckedOut).length,checkedOut:n.filter(e=>e.isCheckedOut).length}}}}catch(e){return console.error("Error fetching lanyards data:",e),{notFound:!0}}},j=(0,l.l)(s,"default"),w=(0,l.l)(s,"getStaticProps"),k=(0,l.l)(s,"getStaticPaths"),C=(0,l.l)(s,"getServerSideProps"),S=(0,l.l)(s,"config"),E=(0,l.l)(s,"reportWebVitals"),A=(0,l.l)(s,"unstable_getStaticProps"),D=(0,l.l)(s,"unstable_getStaticPaths"),O=(0,l.l)(s,"unstable_getStaticParams"),L=(0,l.l)(s,"unstable_getServerProps"),T=(0,l.l)(s,"unstable_getServerSideProps"),P=new a.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/events/[id]/lanyards",pathname:"/events/[id]/lanyards",bundlePath:"",filename:""},components:{App:o.default,Document:d()},userland:s})},9927:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var s=t(997),a=t(1649),n=t(1664),l=t.n(n),i=t(1163);function d({children:e,title:r="JW Attendant Scheduler",breadcrumbs:t=[],selectedEvent:n}){let{data:d}=(0,a.useSession)(),o=(0,i.useRouter)(),c=[{label:"Events",href:"/events",icon:"\uD83D\uDCC5",roles:["ADMIN","OVERSEER","ATTENDANT"]},{label:"Event Selection",href:"/events/select",icon:"\uD83C\uDFAF",roles:["ADMIN","OVERSEER","ATTENDANT"]}];d?.user?.role==="ADMIN"&&c.push({label:"Admin Portal",href:"/admin",icon:"\uD83D\uDEE1️",roles:["ADMIN"]});let u=c.filter(e=>e.roles.includes(d?.user?.role||""));return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)(l(),{href:"/events/select",className:"flex items-center",children:[s.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"\uD83D\uDCCB"}),s.jsx("span",{className:"ml-2 text-xl font-semibold text-gray-900",children:"JW Attendant Scheduler"})]}),s.jsx("div",{className:"hidden md:ml-8 md:flex md:space-x-4",children:u.map(e=>(0,s.jsxs)(l(),{href:e.href,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${o.pathname.startsWith(e.href)?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[s.jsx("span",{className:"mr-2",children:e.icon}),e.label]},e.href))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[n&&(0,s.jsxs)("div",{className:"hidden md:flex items-center bg-blue-50 px-3 py-1 rounded-lg",children:[(0,s.jsxs)("span",{className:"text-sm text-blue-600 font-medium",children:["\uD83D\uDCC5 ",n.name]}),n.status&&s.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${"current"===n.status?"bg-green-100 text-green-800":"upcoming"===n.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:n.status})]}),d?.user&&(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-sm text-gray-700",children:d.user.name}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${"ADMIN"===d.user.role?"bg-red-100 text-red-800":"OVERSEER"===d.user.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:d.user.role}),s.jsx("button",{onClick:()=>{(0,a.signOut)({callbackUrl:"/auth/signin"})},className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Sign Out"})]})]})]})})}),t.length>0&&s.jsx("div",{className:"bg-white border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:s.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:s.jsx("ol",{className:"flex items-center space-x-2",children:t.map((e,r)=>(0,s.jsxs)("li",{className:"flex items-center",children:[r>0&&s.jsx("svg",{className:"w-4 h-4 text-gray-400 mx-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.href?s.jsx(l(),{href:e.href,className:"text-sm text-blue-600 hover:text-blue-800",children:e.label}):s.jsx("span",{className:"text-sm text-gray-500",children:e.label})]},r))})})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r&&s.jsx("div",{className:"mb-8",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r})}),e]})]})}},6814:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(997),a=t(1649);function n({Component:e,pageProps:{session:r,...t}}){return s.jsx(a.SessionProvider,{session:r,children:s.jsx(e,{...t})})}t(6764)},5175:(e,r,t)=>{"use strict";t.d(r,{L:()=>c});var s=t(3227),a=t.n(s);let n=require("next-auth/providers/credentials");var l=t.n(n),i=t(8925);let d=require("bcryptjs");var o=t.n(d);let c={providers:[l()({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;let r=await i.prisma.users.findUnique({where:{email:e.email}});return r&&r.passwordHash&&await o().compare(e.password,r.passwordHash)?{id:r.id,email:r.email,name:`${r.firstName} ${r.lastName}`,role:r.role}:null}})],callbacks:{jwt:async({token:e,user:r})=>(r&&(e.role=r.role),e),session:async({session:e,token:r})=>(r&&(e.user.id=r.sub,e.user.role=r.role),e)},pages:{signIn:"/auth/signin"},session:{strategy:"jwt",maxAge:2592e3},cookies:{sessionToken:{name:"__Secure-next-auth.session-token",options:{httpOnly:!0,sameSite:"lax",path:"/",secure:!0}}},secret:"staging-nextauth-secret-2024"};a()(c)},8925:(e,r,t)=>{"use strict";t.r(r),t.d(r,{prisma:()=>a});let s=require("@prisma/client"),a=globalThis.prisma??new s.PrismaClient},6764:()=>{},3227:e=>{"use strict";e.exports=require("next-auth")},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[2899,8342,1664],()=>t(5638));module.exports=s})();