exports.id=4937,exports.ids=[4937],exports.modules={9927:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var r=t(997),l=t(1649),a=t(1664),n=t.n(a),i=t(1163);function d({children:e,title:s="JW Attendant Scheduler",breadcrumbs:t=[],selectedEvent:a}){let{data:d}=(0,l.useSession)(),c=(0,i.useRouter)(),o=[{label:"Events",href:"/events",icon:"\uD83D\uDCC5",roles:["ADMIN","OVERSEER","ATTENDANT"]},{label:"Event Selection",href:"/events/select",icon:"\uD83C\uDFAF",roles:["ADMIN","OVERSEER","ATTENDANT"]}];["ADMIN","OVERSEER"].includes(d?.user?.role||"")&&o.push({label:"Attendants",href:"/attendants",icon:"\uD83D\uDC65",roles:["ADMIN","OVERSEER"]}),d?.user?.role==="ADMIN"&&o.push({label:"Admin Portal",href:"/admin",icon:"\uD83D\uDEE1ï¸",roles:["ADMIN"]});let x=o.filter(e=>e.roles.includes(d?.user?.role||""));return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)(n(),{href:"/events/select",className:"flex items-center",children:[r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"\uD83D\uDCCB"}),r.jsx("span",{className:"ml-2 text-xl font-semibold text-gray-900",children:"JW Attendant Scheduler"})]}),r.jsx("div",{className:"hidden md:ml-8 md:flex md:space-x-4",children:x.map(e=>(0,r.jsxs)(n(),{href:e.href,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${c.pathname.startsWith(e.href)?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[r.jsx("span",{className:"mr-2",children:e.icon}),e.label]},e.href))})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[a&&(0,r.jsxs)("div",{className:"hidden md:flex items-center bg-blue-50 px-3 py-1 rounded-lg",children:[(0,r.jsxs)("span",{className:"text-sm text-blue-600 font-medium",children:["\uD83D\uDCC5 ",a.name]}),a.status&&r.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${"current"===a.status?"bg-green-100 text-green-800":"upcoming"===a.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:a.status})]}),d?.user&&(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-sm text-gray-700",children:d.user.name}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${"ADMIN"===d.user.role?"bg-red-100 text-red-800":"OVERSEER"===d.user.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:d.user.role}),r.jsx("button",{onClick:()=>{(0,l.signOut)({callbackUrl:"/auth/signin"})},className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Sign Out"})]})]})]})})}),t.length>0&&r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:r.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:r.jsx("ol",{className:"flex items-center space-x-2",children:t.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-center",children:[s>0&&r.jsx("svg",{className:"w-4 h-4 text-gray-400 mx-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.href?r.jsx(n(),{href:e.href,className:"text-sm text-blue-600 hover:text-blue-800",children:e.label}):r.jsx("span",{className:"text-sm text-gray-500",children:e.label})]},s))})})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s&&r.jsx("div",{className:"mb-8",children:r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s})}),e]})]})}},331:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var r=t(997),l=t(6689),a=t(3414);function n({selectedForms:e,onChange:s,disabled:t=!1,className:n="",label:i="Forms of Service",required:d=!1}){let[c,o]=(0,l.useState)(!1),x=t=>{e.includes(t)?s(e.filter(e=>e!==t)):s([...e,t])};return(0,r.jsxs)("div",{className:`relative ${n}`,children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i,d&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("button",{type:"button",onClick:()=>o(!c),disabled:t,className:`
            w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-left
            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
            ${t?"bg-gray-100 cursor-not-allowed":"hover:border-gray-400 cursor-pointer"}
            ${0===e.length?"text-gray-500":"text-gray-900"}
          `,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"block truncate",children:0===e.length?"Select forms of service...":1===e.length?e[0]:`${e.length} forms selected`}),r.jsx("svg",{className:`h-5 w-5 text-gray-400 transition-transform ${c?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),c&&r.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg",children:(0,r.jsxs)("div",{className:"py-1",children:[r.jsx("div",{className:"px-3 py-2 border-b border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("button",{type:"button",onClick:()=>{s(a.G)},className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Select All"}),r.jsx("button",{type:"button",onClick:()=>{s([])},className:"text-xs text-gray-600 hover:text-gray-800 font-medium",children:"Clear All"})]})}),r.jsx("div",{className:"max-h-60 overflow-y-auto",children:a.G.map(s=>(0,r.jsxs)("label",{className:"flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.includes(s),onChange:()=>x(s),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("span",{className:"ml-2 text-sm text-gray-900",children:s})]},s))})]})})]}),e.length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800",children:[e,r.jsx("button",{type:"button",onClick:()=>x(e),className:"ml-1 h-3 w-3 rounded-full hover:bg-blue-200 flex items-center justify-center",children:r.jsx("svg",{className:"h-2 w-2",fill:"currentColor",viewBox:"0 0 8 8",children:r.jsx("path",{d:"M1.41 0l-1.41 1.41.72.72 1.78 1.81-1.78 1.81-.72.72 1.41 1.41.72-.72 1.81-1.78 1.81 1.78.72.72 1.41-1.41-.72-.72-1.78-1.81 1.78-1.81.72-.72-1.41-1.41-.72.72-1.81 1.78-1.81-1.78-.72-.72z"})})})]},e))}),c&&r.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>o(!1)})]})}},1571:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var r=t(997);t(6689);let l={primary:"bg-blue-600 hover:bg-blue-700 text-white border-transparent",secondary:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",danger:"bg-red-600 hover:bg-red-700 text-white border-transparent",success:"bg-green-600 hover:bg-green-700 text-white border-transparent"},a={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};function n({onClick:e,variant:s="primary",size:t="md",disabled:n=!1,loading:i=!1,children:d,className:c="",type:o="button"}){return(0,r.jsxs)("button",{type:o,onClick:s=>{"button"===o&&s.preventDefault(),e(s)},disabled:n||i,className:`
        inline-flex items-center justify-center
        border rounded-md font-medium
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        transition-colors duration-200
        ${l[s]}
        ${a[t]}
        ${n||i?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        ${c}
      `,children:[i&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})}},7050:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var r=t(997);t(6689);let l={Elder:"bg-purple-100 text-purple-800","Ministerial Servant":"bg-blue-100 text-blue-800",Exemplary:"bg-green-100 text-green-800","Regular Pioneer":"bg-yellow-100 text-yellow-800","Other Department":"bg-gray-100 text-gray-800"},a={Elder:"Elder","Ministerial Servant":"MS",Exemplary:"Exemplary","Regular Pioneer":"RP","Other Department":"Other"};function n({form:e,className:s="",size:t="sm"}){return r.jsx("span",{className:`
        inline-flex font-medium rounded-full
        ${l[e]}
        ${"sm"===t?"px-2 py-1 text-xs":"px-3 py-1 text-sm"}
        ${s}
      `,title:e,children:a[e]})}},2085:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var r=t(997);function l({value:e,onChange:s,placeholder:t="Search attendants...",disabled:l=!1,className:a=""}){return(0,r.jsxs)("div",{className:`relative ${a}`,children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),r.jsx("input",{type:"text",value:e,onChange:e=>s(e.target.value),placeholder:t,disabled:l,className:`
          block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md
          placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
          ${l?"bg-gray-100 cursor-not-allowed":"bg-white"}
          sm:text-sm
        `})]})}t(6689);var a=t(331);function n({filters:e,onFiltersChange:s,congregations:t,loading:n=!1}){let i=t=>{s({...e,search:t})},d=t=>{s({...e,congregation:t})},c=t=>{s({...e,isActive:t})},o=t=>{s({...e,hasUser:t})},x=!!(e.search||e.congregation||e.formsOfService?.length||void 0!==e.isActive||void 0!==e.hasUser);return(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"}),x&&r.jsx("button",{onClick:()=>{s({})},disabled:n,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear All"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"lg:col-span-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),r.jsx(l,{value:e.search||"",onChange:i,placeholder:"Search by name, email, or congregation...",disabled:n})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Congregation"}),(0,r.jsxs)("select",{value:e.congregation||"",onChange:e=>d(e.target.value),disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[r.jsx("option",{value:"",children:"All Congregations"}),t.map(e=>r.jsx("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,r.jsxs)("select",{value:void 0===e.isActive?"":e.isActive.toString(),onChange:e=>{let s=e.target.value;c(""===s?void 0:"true"===s)},disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Inactive"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Account"}),(0,r.jsxs)("select",{value:void 0===e.hasUser?"":e.hasUser.toString(),onChange:e=>{let s=e.target.value;o(""===s?void 0:"true"===s)},disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[r.jsx("option",{value:"",children:"All Users"}),r.jsx("option",{value:"true",children:"Has Account"}),r.jsx("option",{value:"false",children:"No Account"})]})]})]}),r.jsx("div",{className:"mt-4",children:r.jsx(a.Z,{selectedForms:e.formsOfService||[],onChange:t=>{s({...e,formsOfService:t})},disabled:n,label:"Filter by Forms of Service"})}),x&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.search&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800",children:['Search: "',e.search,'"',r.jsx("button",{onClick:()=>i(""),className:"ml-1 h-3 w-3 rounded-full hover:bg-blue-200 flex items-center justify-center",children:"\xd7"})]}),e.congregation&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-green-100 text-green-800",children:["Congregation: ",e.congregation,r.jsx("button",{onClick:()=>d(""),className:"ml-1 h-3 w-3 rounded-full hover:bg-green-200 flex items-center justify-center",children:"\xd7"})]}),void 0!==e.isActive&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-yellow-100 text-yellow-800",children:["Status: ",e.isActive?"Active":"Inactive",r.jsx("button",{onClick:()=>c(void 0),className:"ml-1 h-3 w-3 rounded-full hover:bg-yellow-200 flex items-center justify-center",children:"\xd7"})]})]})})]})}},2808:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(997),l=t(6689),a=t(1571),n=t(331);function i({isOpen:e,onClose:s,onSave:t,attendant:i=null,loading:d=!1}){let[c,o]=(0,l.useState)({firstName:"",lastName:"",email:"",phone:"",congregation:"",formsOfService:[],isActive:!0,notes:""}),[x,m]=(0,l.useState)({}),[u,h]=(0,l.useState)(!1),g=()=>{let e={};return c.firstName.trim()||(e.firstName="First name is required"),c.lastName.trim()||(e.lastName="Last name is required"),c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(e.email="Please enter a valid email address"):e.email="Email is required",c.congregation.trim()||(e.congregation="Congregation is required"),0===c.formsOfService.length&&(e.formsOfService="At least one form of service is required"),m(e),0===Object.keys(e).length},p=async e=>{if(e.preventDefault(),g())try{h(!0),await t(c),s()}catch(e){}finally{h(!1)}},f=(e,s)=>{o(t=>({...t,[e]:s})),x[e]&&m(s=>({...s,[e]:""}))};return e?r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 xl:w-2/5 shadow-lg rounded-md bg-white",children:r.jsx("form",{onSubmit:p,children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i?"Edit Attendant":"Create New Attendant"}),r.jsx("button",{type:"button",onClick:s,disabled:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:c.firstName,onChange:e=>f("firstName",e.target.value),disabled:u,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${x.firstName?"border-red-300":"border-gray-300"}`,placeholder:"Enter first name"}),x.firstName&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.firstName})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:c.lastName,onChange:e=>f("lastName",e.target.value),disabled:u,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${x.lastName?"border-red-300":"border-gray-300"}`,placeholder:"Enter last name"}),x.lastName&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.lastName})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",value:c.email,onChange:e=>f("email",e.target.value),disabled:u,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${x.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter email address"}),x.email&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.email})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:c.phone,onChange:e=>f("phone",e.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Congregation ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:c.congregation,onChange:e=>f("congregation",e.target.value),disabled:u,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${x.congregation?"border-red-300":"border-gray-300"}`,placeholder:"Enter congregation name"}),x.congregation&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.congregation})]}),(0,r.jsxs)("div",{children:[r.jsx(n.Z,{selectedForms:c.formsOfService,onChange:e=>f("formsOfService",e),disabled:u,required:!0}),x.formsOfService&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.formsOfService})]}),r.jsx("div",{children:(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:c.isActive,onChange:e=>f("isActive",e.target.checked),disabled:u,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Active (available for assignments)"})]})}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:c.notes,onChange:e=>f("notes",e.target.value),disabled:u,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional notes about this attendant"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[r.jsx(a.Z,{onClick:s,variant:"secondary",disabled:u,children:"Cancel"}),r.jsx(a.Z,{onClick:()=>{},type:"submit",variant:"primary",loading:u,disabled:u,children:i?"Update Attendant":"Create Attendant"})]})]})})})}):null}},9470:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(997);t(6689);var l=t(7050);function a({stats:e,loading:s=!1,className:t=""}){if(s)return r.jsx("div",{className:`bg-white rounded-lg shadow p-6 ${t}`,children:(0,r.jsxs)("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded"})]},s))})]})});let a=Object.entries(e.byCongregation).sort(([,e],[,s])=>s-e).slice(0,5),n=Object.entries(e.byFormsOfService).filter(([,e])=>e>0).sort(([,e],[,s])=>s-e);return(0,r.jsxs)("div",{className:`bg-white rounded-lg shadow ${t}`,children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Attendant Statistics"})}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.total}),r.jsx("div",{className:"text-sm text-blue-800",children:"Total"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.active}),r.jsx("div",{className:"text-sm text-green-800",children:"Active"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.inactive}),r.jsx("div",{className:"text-sm text-red-800",children:"Inactive"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(e.active/e.total*100)||0,"%"]}),r.jsx("div",{className:"text-sm text-purple-800",children:"Active Rate"})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"User Accounts"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-xl font-bold text-green-600",children:e.withUsers}),r.jsx("div",{className:"text-sm text-green-800",children:"With Accounts"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-xl font-bold text-gray-600",children:e.withoutUsers}),r.jsx("div",{className:"text-sm text-gray-800",children:"No Account"})]})]})]}),n.length>0&&(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Forms of Service"}),r.jsx("div",{className:"space-y-2",children:n.map(([s,t])=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(l.Z,{form:s}),r.jsx("span",{className:"text-sm text-gray-700",children:s})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:t}),r.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${t/e.total*100}%`}})})]})]},s))})]}),a.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Top Congregations",Object.keys(e.byCongregation).length>5&&r.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(showing top 5)"})]}),r.jsx("div",{className:"space-y-2",children:a.map(([s,t])=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[r.jsx("span",{className:"text-sm text-gray-700 truncate flex-1 mr-2",children:s}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:t}),r.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${t/e.total*100}%`}})})]})]},s))}),Object.keys(e.byCongregation).length>5&&r.jsx("div",{className:"text-center mt-2",children:(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["+",Object.keys(e.byCongregation).length-5," more congregations"]})})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Insights"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,r.jsxs)("span",{children:[Object.keys(e.byCongregation).length," congregations represented"]})]}),e.withUsers>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,r.jsxs)("span",{children:[Math.round(e.withUsers/e.total*100),"% have user accounts"]})]}),n.length>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,r.jsxs)("span",{children:["Most common: ",n[0][0]," (",n[0][1]," attendants)"]})]})]})]})]})]})}},6603:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var r=t(997),l=t(6689);function a({isActive:e,className:s=""}){return r.jsx("span",{className:`
        inline-flex px-2 py-1 text-xs font-semibold rounded-full
        ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}
        ${s}
      `,children:e?"Active":"Inactive"})}var n=t(7050),i=t(1571);function d({attendants:e,loading:s=!1,onEdit:t,onDelete:d,onSelect:c,selectedIds:o=[],onBulkStatusChange:x}){let[m,u]=(0,l.useState)("lastName"),[h,g]=(0,l.useState)("asc"),p=e=>{m===e?g("asc"===h?"desc":"asc"):(u(e),g("asc"))},f=s=>{c&&c(s?e.map(e=>e.id):[])},j=(e,s)=>{c&&(s?c([...o,e]):c(o.filter(s=>s!==e)))},b=[...e].sort((e,s)=>{let t=e[m],r=s[m];if(null==t)return 1;if(null==r)return -1;let l=t<r?-1:t>r?1:0;return"asc"===h?l:-l}),v=({field:e})=>m!==e?r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):"asc"===h?r.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):r.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),N=e.length>0&&o.length===e.length,y=o.length>0&&o.length<e.length;return s?r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,r.jsxs)("div",{className:"px-6 py-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading attendants..."})]})}):0===e.length?r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsx("p",{className:"text-lg font-medium",children:"No attendants found"}),r.jsx("p",{className:"text-sm",children:"Try adjusting your filters or create a new attendant"})]})})}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full table-fixed divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[c&&r.jsx("th",{className:"px-3 py-3 text-left w-12",children:r.jsx("input",{type:"checkbox",checked:N,ref:e=>{e&&(e.indeterminate=y)},onChange:e=>f(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),r.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 w-[15%]",onClick:()=>p("lastName"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{children:"Name"}),r.jsx(v,{field:"lastName"})]})}),r.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 w-[20%]",onClick:()=>p("email"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{children:"Email"}),r.jsx(v,{field:"email"})]})}),r.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[10%]",children:"Phone"}),r.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 w-[12%]",onClick:()=>p("congregation"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{children:"Congregation"}),r.jsx(v,{field:"congregation"})]})}),r.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]",children:"Forms of Service"}),r.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 w-[8%]",onClick:()=>p("isActive"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{children:"Status"}),r.jsx(v,{field:"isActive"})]})}),r.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[10%]",children:"User Account"}),r.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[10%]",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[c&&r.jsx("td",{className:"px-2 py-3",children:r.jsx("input",{type:"checkbox",checked:o.includes(e.id),onChange:s=>j(e.id,s.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),r.jsx("td",{className:"px-2 py-3",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-6 w-6",children:r.jsx("div",{className:"h-6 w-6 rounded-full bg-blue-100 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-blue-600 font-medium text-xs",children:[e.firstName[0],e.lastName[0]]})})}),r.jsx("div",{className:"ml-2 truncate",children:(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900 truncate",children:[e.firstName," ",e.lastName]})})]})}),r.jsx("td",{className:"px-2 py-3 text-sm text-gray-500",children:r.jsx("div",{className:"truncate",title:e.email,children:e.email})}),r.jsx("td",{className:"px-2 py-3 text-sm text-gray-500",children:r.jsx("div",{className:"truncate",children:e.phone||"N/A"})}),r.jsx("td",{className:"px-2 py-3 text-sm text-gray-500",children:r.jsx("div",{className:"truncate",title:e.congregation,children:e.congregation})}),r.jsx("td",{className:"px-2 py-3",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.formsOfService?.slice(0,2).map((e,s)=>r.jsx(n.Z,{form:e},s)),e.formsOfService?.length>2&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.formsOfService.length-2]})]})}),r.jsx("td",{className:"px-2 py-3",children:r.jsx(a,{isActive:e.isActive})}),r.jsx("td",{className:"px-2 py-3 text-sm text-gray-500",children:e.users?r.jsx("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Linked"}):r.jsx("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:"No Account"})}),r.jsx("td",{className:"px-2 py-3 text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[t&&r.jsx(i.Z,{onClick:()=>t(e),variant:"secondary",size:"sm",children:"Edit"}),d&&r.jsx(i.Z,{onClick:()=>d(e.id),variant:"danger",size:"sm",children:"Delete"})]})})]},e.id))})]})})})}},9939:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(997),l=t(6689),a=t(3414),n=t(1571);function i({isOpen:e,onClose:s,onImport:t,eventId:i,loading:d=!1}){let[c,o]=(0,l.useState)(""),[x,m]=(0,l.useState)(null),[u,h]=(0,l.useState)([]),[g,p]=(0,l.useState)([]),[f,j]=(0,l.useState)(!1),[b,v]=(0,l.useState)("input"),[N,y]=(0,l.useState)(null),[w,k]=(0,l.useState)("file"),C=`firstName,lastName,email,phone,congregation,formsOfService,isActive,notes
John,Smith,john.smith@example.com,216-555-0123,Central Congregation,"Elder,Exemplary",true,Available for all assignments
Jane,Doe,jane.doe@example.com,216-555-0124,North Congregation,"Ministerial Servant,Regular Pioneer",true,
Mike,Johnson,mike.j@example.com,,South Congregation,"Other Department",false,Currently unavailable`,S=e=>{try{let s=e.trim().split("\n"),t=s[0].split(",").map(e=>e.trim().replace(/"/g,"")),r=["firstName","lastName","email","congregation","formsOfService"].filter(e=>!t.includes(e));if(r.length>0){p([`Missing required columns: ${r.join(", ")}`]);return}let l=[],n=[];for(let e=1;e<s.length;e++){let r=s[e].trim();if(!r)continue;let i=r.split(",").map(e=>e.trim().replace(/"/g,"")),d={};if(t.forEach((e,s)=>{d[e]=i[s]||""}),!d.firstName){n.push(`Row ${e+1}: First name is required`);continue}if(!d.lastName){n.push(`Row ${e+1}: Last name is required`);continue}if(!d.email||!/\S+@\S+\.\S+/.test(d.email)){n.push(`Row ${e+1}: Valid email is required`);continue}if(!d.congregation){n.push(`Row ${e+1}: Congregation is required`);continue}if(!d.formsOfService){n.push(`Row ${e+1}: Forms of service are required`);continue}let c=d.formsOfService.split(",").map(e=>e.trim()).filter(e=>!a.G.includes(e));if(c.length>0){n.push(`Row ${e+1}: Invalid forms of service: ${c.join(", ")}`);continue}d.isActive="false"!==d.isActive,d.phone=d.phone||"",d.notes=d.notes||"",l.push(d)}if(n.length>0){p(n);return}h(l),p([]),v("preview")}catch(e){p(["Error parsing CSV data. Please check the format."])}},A=async()=>{try{j(!0);let e=await t({attendants:u,eventId:i});y(e),v("results")}catch(e){p([e instanceof Error?e.message:"Import failed"])}finally{j(!1)}},E=()=>{o(""),m(null),h([]),p([]),v("input"),y(null);let e=document.getElementById("csv-file-input");e&&(e.value="")},$=()=>{E(),s()};return e?r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-10 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 xl:w-2/3 shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Bulk Import Attendants"}),r.jsx("button",{type:"button",onClick:$,disabled:f,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:`flex items-center ${"input"===b?"text-blue-600":"text-green-600"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${"input"===b?"bg-blue-100":"bg-green-100"}`,children:"1"}),r.jsx("span",{className:"ml-2 text-sm font-medium",children:"Input CSV"})]}),r.jsx("div",{className:"flex-1 h-px bg-gray-300 mx-4"}),(0,r.jsxs)("div",{className:`flex items-center ${"preview"===b?"text-blue-600":"results"===b?"text-green-600":"text-gray-400"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${"preview"===b?"bg-blue-100":"results"===b?"bg-green-100":"bg-gray-100"}`,children:"2"}),r.jsx("span",{className:"ml-2 text-sm font-medium",children:"Preview"})]}),r.jsx("div",{className:"flex-1 h-px bg-gray-300 mx-4"}),(0,r.jsxs)("div",{className:`flex items-center ${"results"===b?"text-blue-600":"text-gray-400"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${"results"===b?"bg-blue-100":"bg-gray-100"}`,children:"3"}),r.jsx("span",{className:"ml-2 text-sm font-medium",children:"Results"})]})]})}),"input"===b&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"CSV Format Requirements"}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-blue-700",children:[r.jsx("p",{children:"Required columns: firstName, lastName, email, congregation, formsOfService"}),r.jsx("p",{children:"Optional columns: phone, isActive, notes"}),(0,r.jsxs)("p",{children:["Forms of Service: ",a.G.join(", ")]})]})]})]})}),(0,r.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg mb-4",children:[r.jsx("button",{type:"button",onClick:()=>k("file"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${"file"===w?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"\uD83D\uDCC1 Upload CSV File"}),r.jsx("button",{type:"button",onClick:()=>k("text"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${"text"===w?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"\uD83D\uDCDD Paste CSV Text"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"file"===w?"CSV File Upload":"CSV Data"}),r.jsx(n.Z,{onClick:()=>{let e=new Blob([C],{type:"text/csv"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="attendant_import_template.csv",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)},variant:"secondary",size:"sm",children:"\uD83D\uDCE5 Download Template"})]}),"file"===w?(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-center w-full",children:(0,r.jsxs)("label",{htmlFor:"csv-file-input",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[r.jsx("svg",{className:"w-8 h-8 mb-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,r.jsxs)("p",{className:"mb-2 text-sm text-gray-500",children:[r.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"CSV files only"})]}),r.jsx("input",{id:"csv-file-input",type:"file",accept:".csv,text/csv",onChange:e=>{let s=e.target.files?.[0];if(s){if("text/csv"!==s.type&&!s.name.endsWith(".csv")){p(["Please select a CSV file"]);return}m(s),p([])}},disabled:f,className:"hidden"})]})}),x&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-md",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"text-sm text-green-800 font-medium",children:x.name}),(0,r.jsxs)("span",{className:"text-xs text-green-600 ml-2",children:["(",(x.size/1024).toFixed(1)," KB)"]})]}),r.jsx("button",{type:"button",onClick:()=>m(null),className:"text-green-600 hover:text-green-800 transition-colors",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}):r.jsx("textarea",{value:c,onChange:e=>o(e.target.value),disabled:f,rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Paste your CSV data here or download the template to get started..."}),g.length>0&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Validation Errors"}),r.jsx("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:g.map((e,s)=>r.jsx("li",{children:e},s))})]})]})})]}),"preview"===b&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h4",{className:"text-md font-medium text-gray-900",children:["Preview (",u.length," attendants)"]}),r.jsx(n.Z,{onClick:()=>v("input"),variant:"secondary",size:"sm",children:"Back to Edit"})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-md",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Congregation"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Forms of Service"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map((e,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900",children:[e.firstName," ",e.lastName]}),r.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:e.email}),r.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:e.congregation}),r.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:e.formsOfService}),r.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:e.isActive?"Active":"Inactive"})]},s))})]})})]}),"results"===b&&N&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Import Results"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.created||0}),r.jsx("div",{className:"text-sm text-green-800",children:"Created"})]})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N.updated||0}),r.jsx("div",{className:"text-sm text-blue-800",children:"Updated"})]})}),r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:N.errors?.length||0}),r.jsx("div",{className:"text-sm text-red-800",children:"Errors"})]})})]}),N.errors&&N.errors.length>0&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[r.jsx("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"Import Errors"}),r.jsx("div",{className:"max-h-40 overflow-y-auto",children:N.errors.map((e,s)=>(0,r.jsxs)("div",{className:"text-sm text-red-700",children:["Row ",e.row," (",e.email,"): ",e.error]},s))})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:["input"===b&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Z,{onClick:$,variant:"secondary",children:"Cancel"}),r.jsx(n.Z,{onClick:"file"===w?()=>{if(!x){p(["Please select a CSV file"]);return}let e=new FileReader;e.onload=e=>{S(e.target?.result)},e.onerror=()=>{p(["Error reading file"])},e.readAsText(x)}:()=>{if(!c.trim()){p(["Please enter CSV data"]);return}S(c)},variant:"primary",disabled:"file"===w?!x:!c.trim(),children:"file"===w?"Process File":"Parse CSV"})]}),"preview"===b&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Z,{onClick:()=>v("input"),variant:"secondary",children:"Back"}),(0,r.jsxs)(n.Z,{onClick:A,variant:"primary",loading:f,disabled:f,children:["Import ",u.length," Attendants"]})]}),"results"===b&&r.jsx(n.Z,{onClick:$,variant:"primary",children:"Done"})]})]})})}):null}},6814:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(997),l=t(1649);function a({Component:e,pageProps:{session:s,...t}}){return r.jsx(l.SessionProvider,{session:s,children:r.jsx(e,{...t})})}t(6764)},6847:(e,s,t)=>{"use strict";t.d(s,{L:()=>u});var r=t(3227),l=t.n(r),a=t(7449),n=t.n(a),i=t(7652),d=t(8432),c=t.n(d),o=t(2048),x=t.n(o);let m=e=>{let s=new Date().toISOString(),t=`[${s}] ${e}
`;try{x().appendFileSync("/tmp/nextauth-debug.log",t)}catch(e){}},u={providers:[n()({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){try{if(m(`Starting authorization for: ${e?.email}`),!e?.email||!e?.password)return m("Missing credentials"),null;m("Looking up user in database...");let s=await i.prisma.users.findUnique({where:{email:e.email}});if(!s)return m(`User not found: ${e.email}`),null;if(!s.passwordHash)return m("User has no password hash"),null;m("Comparing password...");let t=await c().compare(e.password,s.passwordHash);if(m(`Password valid: ${t}`),!t)return m(`Invalid password for: ${e.email}`),null;return m(`Authentication successful for: ${s.email}`),{id:s.id,email:s.email,name:`${s.firstName} ${s.lastName}`,image:s.image||null,role:s.role}}catch(e){return m(`Error during authorization: ${e}`),null}}})],session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:s})=>(s&&(e.role=s.role,e.image=s.image),e),session:async({session:e,token:s})=>(s&&(e.user.id=s.sub,e.user.role=s.role),e)},pages:{signIn:"/auth/signin"}};l()(u)},7652:(e,s,t)=>{"use strict";t.r(s),t.d(s,{prisma:()=>l});var r=t(3524);let l=globalThis.prisma??new r.PrismaClient},3414:(e,s,t)=>{"use strict";t.d(s,{G:()=>r});let r=["Elder","Ministerial Servant","Exemplary","Regular Pioneer","Other Department"];r.map(e=>({value:e,label:e}))},6764:()=>{}};