(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[528],{3309:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guest-lookup",function(){return s(6199)}])},6199:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return l},default:function(){return o}});var n=s(5893),a=s(7294),r=s(9008),i=s.n(r),l=!0;function o(){let[e,t]=(0,a.useState)(""),[s,r]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),[x,p]=(0,a.useState)(""),h=async t=>{if(t.preventDefault(),!e.trim()||!s.trim()){p("Please enter both first and last name");return}c(!0),p(""),u(null);try{let t=new URLSearchParams({firstName:e.trim(),lastName:s.trim(),...l&&{eventId:l}}),n=await fetch("/api/attendants/lookup?".concat(t)),a=await n.json();a.success?u(a.data):p(a.error||"Attendant not found")}catch(e){p("An error occurred while looking up your information")}finally{c(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:"Guest Attendant Lookup | JW Attendant Scheduler"}),(0,n.jsx)("meta",{name:"description",content:"Look up your attendant assignments"})]}),(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Attendant Lookup"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your name to view your assignments"})]}),(0,n.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:h,children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,n.jsx)("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:e,onChange:e=>t(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter your first name"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,n.jsx)("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:s,onChange:e=>r(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter your last name"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"eventId",className:"block text-sm font-medium text-gray-700",children:"Event ID (Optional)"}),(0,n.jsx)("input",{id:"eventId",name:"eventId",type:"text",value:l,onChange:e=>o(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Enter event ID for specific assignments"})]})]}),x&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,n.jsx)("div",{className:"text-sm text-red-600",children:x})}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Looking up...":"Look Up Assignments"})})]}),m&&(0,n.jsxs)("div",{className:"mt-8 bg-white shadow rounded-lg p-6",children:[(0,n.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Welcome, ",m.attendant.firstName," ",m.attendant.lastName,"!"]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Contact Information"}),(0,n.jsxs)("div",{className:"mt-1 text-sm text-gray-600",children:[(0,n.jsxs)("p",{children:["Email: ",m.attendant.email]}),m.attendant.phone&&(0,n.jsxs)("p",{children:["Phone: ",m.attendant.phone]}),(0,n.jsxs)("p",{children:["Congregation: ",m.attendant.congregation]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Forms of Service"}),(0,n.jsx)("div",{className:"mt-1",children:Array.isArray(m.attendant.formsOfService)&&m.attendant.formsOfService.length>0?(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:m.attendant.formsOfService.map((e,t)=>(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},t))}):(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"No forms of service listed"})})]}),m.assignments&&m.assignments.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Your Assignments"}),(0,n.jsx)("div",{className:"mt-2 space-y-2",children:m.assignments.map(e=>(0,n.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium text-gray-900",children:e.event_positions.positionName}),e.event_positions.department&&(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["Department: ",e.event_positions.department]}),e.event_positions.description&&(0,n.jsx)("p",{className:"text-sm text-gray-500",children:e.event_positions.description})]}),(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("ASSIGNED"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),(0,n.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:(0,n.jsxs)("p",{children:["Shift: ",new Date(e.shiftStart).toLocaleString()," - ",new Date(e.shiftEnd).toLocaleString()]})})]},e.id))})]}),(!m.assignments||0===m.assignments.length)&&l&&(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"No assignments found for the specified event."})]})]})]})})]})}},9008:function(e,t,s){e.exports=s(3867)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3309)}),_N_E=e.O()}]);