(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{5378:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events",function(){return t(9630)}])},5083:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(5893),r=t(3299),l=t(1664),n=t.n(l),i=t(1163);function c(e){var s;let{children:t,title:l="JW Attendant Scheduler",breadcrumbs:c=[],selectedEvent:d}=e,{data:o}=(0,r.useSession)(),x=(0,i.useRouter)(),u=[{label:"Events",href:"/events",icon:"\uD83D\uDCC5",roles:["ADMIN","OVERSEER","ATTENDANT"]},{label:"Event Selection",href:"/events/select",icon:"\uD83C\uDFAF",roles:["ADMIN","OVERSEER","ATTENDANT"]}];(null==o?void 0:null===(s=o.user)||void 0===s?void 0:s.role)==="ADMIN"&&u.push({label:"Admin Portal",href:"/admin",icon:"\uD83D\uDEE1️",roles:["ADMIN"]});let m=u.filter(e=>{var s;return e.roles.includes((null==o?void 0:null===(s=o.user)||void 0===s?void 0:s.role)||"")});return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(n(),{href:"/events/select",className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:"\uD83D\uDCCB"}),(0,a.jsx)("span",{className:"ml-2 text-xl font-semibold text-gray-900",children:"JW Attendant Scheduler"})]}),(0,a.jsx)("div",{className:"hidden md:ml-8 md:flex md:space-x-4",children:m.map(e=>(0,a.jsxs)(n(),{href:e.href,className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(x.pathname.startsWith(e.href)?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.href))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[d&&(0,a.jsxs)("div",{className:"hidden md:flex items-center bg-blue-50 px-3 py-1 rounded-lg",children:[(0,a.jsxs)("span",{className:"text-sm text-blue-600 font-medium",children:["\uD83D\uDCC5 ",d.name]}),d.status&&(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full ".concat("current"===d.status?"bg-green-100 text-green-800":"upcoming"===d.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:d.status})]}),(null==o?void 0:o.user)&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:o.user.name}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("ADMIN"===o.user.role?"bg-red-100 text-red-800":"OVERSEER"===o.user.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:o.user.role}),(0,a.jsx)("button",{onClick:()=>{(0,r.signOut)({callbackUrl:"/auth/signin"})},className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Sign Out"})]})]})]})})}),c.length>0&&(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:(0,a.jsx)("nav",{className:"flex","aria-label":"Breadcrumb",children:(0,a.jsx)("ol",{className:"flex items-center space-x-2",children:c.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-center",children:[s>0&&(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400 mx-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.href?(0,a.jsx)(n(),{href:e.href,className:"text-sm text-blue-600 hover:text-blue-800",children:e.label}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.label})]},s))})})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l&&(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:l})}),t]})]})}},9630:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return o},default:function(){return x}});var a=t(5893),r=t(3299),l=t(5083),n=t(7294),i=t(1664),c=t.n(i),d=t(1163),o=!0;function x(){var e;let{data:s,status:t}=(0,r.useSession)();(0,d.useRouter)();let[i,o]=(0,n.useState)([]),[x,u]=(0,n.useState)(!0),[m,h]=(0,n.useState)(""),[p,g]=(0,n.useState)({page:1,limit:10,total:0,pages:0,hasNext:!1,hasPrev:!1}),[v,b]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[y,f]=(0,n.useState)(""),[E,w]=(0,n.useState)("startDate"),[D,S]=(0,n.useState)("desc"),C=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{u(!0);let s=new URLSearchParams({page:e.toString(),limit:p.limit.toString(),search:v,eventType:j,status:y,sortBy:E,sortOrder:D}),t=await fetch("/api/events?".concat(s)),a=await t.json();a.success?(o(a.data.events),g(a.data.pagination)):h("Failed to fetch events")}catch(e){h("Error fetching events"),console.error("Error:",e)}finally{u(!1)}};(0,n.useEffect)(()=>{C()},[v,j,y,E,D]);let T=e=>new Date(e).toLocaleDateString(),A=e=>new Date("2000-01-01T".concat(e)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),R=e=>({DRAFT:"bg-gray-100 text-gray-800",PUBLISHED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800",COMPLETED:"bg-blue-100 text-blue-800"})[e]||"bg-gray-100 text-gray-800",I=e=>({ASSEMBLY:"Assembly",CONVENTION:"Convention",CIRCUIT_OVERSEER_VISIT:"CO Visit",SPECIAL_EVENT:"Special Event",MEETING:"Meeting",MEMORIAL:"Memorial",OTHER:"Other"})[e]||e;return(0,a.jsx)(l.Z,{title:"Events Management",breadcrumbs:[{label:"Events",href:"/events"}],children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Manage events, assignments, and attendant scheduling"})}),(null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.role)==="ADMIN"&&(0,a.jsx)(c(),{href:"/events/create",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"➕ Create Event"})]})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C(1)},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,a.jsx)("input",{type:"text",id:"search",value:v,onChange:e=>b(e.target.value),placeholder:"Search events...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"eventType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),(0,a.jsxs)("select",{id:"eventType",value:j,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Types"}),(0,a.jsx)("option",{value:"ASSEMBLY",children:"Assembly"}),(0,a.jsx)("option",{value:"CONVENTION",children:"Convention"}),(0,a.jsx)("option",{value:"CIRCUIT_OVERSEER_VISIT",children:"CO Visit"}),(0,a.jsx)("option",{value:"SPECIAL_EVENT",children:"Special Event"}),(0,a.jsx)("option",{value:"MEETING",children:"Meeting"}),(0,a.jsx)("option",{value:"MEMORIAL",children:"Memorial"}),(0,a.jsx)("option",{value:"OTHER",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{id:"status",value:y,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Statuses"}),(0,a.jsx)("option",{value:"DRAFT",children:"Draft"}),(0,a.jsx)("option",{value:"PUBLISHED",children:"Published"}),(0,a.jsx)("option",{value:"CANCELLED",children:"Cancelled"}),(0,a.jsx)("option",{value:"COMPLETED",children:"Completed"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sortBy",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,a.jsxs)("select",{id:"sortBy",value:E,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"startDate",children:"Start Date"}),(0,a.jsx)("option",{value:"name",children:"Name"}),(0,a.jsx)("option",{value:"eventType",children:"Type"}),(0,a.jsx)("option",{value:"status",children:"Status"}),(0,a.jsx)("option",{value:"createdAt",children:"Created"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{type:"submit",className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"\uD83D\uDD0D Search"})})]})}),m&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,a.jsx)("p",{className:"text-red-700",children:m})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:x?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading events..."})]}):0===i.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"No events found"}),(0,a.jsx)(c(),{href:"/events/create",className:"mt-4 inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Create First Event"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignments"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I(e.eventType)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:T(e.startDate)}),(0,a.jsxs)("div",{className:"text-gray-500",children:[A(e.startTime),e.endTime&&" - ".concat(A(e.endTime))]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,a.jsx)("div",{className:"max-w-xs truncate",children:e.location})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(R(e.status)),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:[e._count.assignments," assigned"]}),(0,a.jsxs)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:[e._count.event_positions," positions"]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,a.jsx)(c(),{href:"/events/".concat(e.id),className:"text-blue-600 hover:text-blue-900 transition-colors",children:"\uD83D\uDCCB Manage"}),(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.role)&&["ADMIN","OVERSEER"].includes(s.user.role)&&(0,a.jsx)(c(),{href:"/events/".concat(e.id,"/edit"),className:"text-green-600 hover:text-green-900 transition-colors",children:"✏️ Edit"})]})]},e.id)})})]})}),p.pages>1&&(0,a.jsx)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing page ",p.page," of ",p.pages," (",p.total," total events)"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>C(p.page-1),disabled:!p.hasPrev,className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Previous"}),(0,a.jsx)("span",{className:"px-3 py-1 text-sm bg-blue-600 text-white rounded",children:p.page}),(0,a.jsx)("button",{onClick:()=>C(p.page+1),disabled:!p.hasNext,className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Next"})]})]})})]})}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)(c(),{href:"/events/create",className:"flex flex-col items-center space-y-2 p-4 rounded-lg border border-gray-200 hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"➕"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Create Event"})]}),(0,a.jsxs)("button",{onClick:()=>C(p.page),className:"flex flex-col items-center space-y-2 p-4 rounded-lg border border-gray-200 hover:border-gray-500 hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD04"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Refresh"})]}),(0,a.jsxs)(c(),{href:"/admin/events/import",className:"flex flex-col items-center space-y-2 p-4 rounded-lg border border-gray-200 hover:border-green-500 hover:bg-green-50 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCE5"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Import Events"})]}),(0,a.jsxs)(c(),{href:"/admin/events/reports",className:"flex flex-col items-center space-y-2 p-4 rounded-lg border border-gray-200 hover:border-purple-500 hover:bg-purple-50 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Reports"})]})]})]})})}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=5378)}),_N_E=e.O()}]);