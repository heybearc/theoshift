(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{5378:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events",function(){return t(9630)}])},6197:function(e,s,t){"use strict";t.d(s,{Z:function(){return d}});var a=t(5893),r=t(1163),l=t(3299),n=t(1664),i=t.n(n);function d(e){var s;let{children:t,title:n,breadcrumbs:d=[]}=e,c=(0,r.useRouter)(),{data:o}=(0,l.useSession)(),x=async()=>{await (0,l.signOut)({callbackUrl:"/auth/signin"})};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(i(),{href:"/admin",className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"h-8 w-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:"JW"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Admin Portal"})})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Welcome, ",null==o?void 0:null===(s=o.user)||void 0===s?void 0:s.name]}),(0,a.jsx)("button",{onClick:x,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Sign Out"})]})]})})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("nav",{className:"w-64 bg-white shadow-sm min-h-screen border-r border-gray-200",children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("ul",{className:"space-y-2",children:[{label:"Dashboard",href:"/admin",icon:"\uD83C\uDFE0"},{label:"User Management",href:"/admin/users",icon:"\uD83D\uDC65"},{label:"Health Monitor",href:"/admin/health",icon:"\uD83D\uDC9A"},{label:"API Status",href:"/admin/api-status",icon:"\uD83D\uDCCA"},{label:"Audit Logs",href:"/admin/audit-logs",icon:"\uD83D\uDCCB"},{label:"System Operations",href:"/admin/system-ops",icon:"⚡"},{label:"Email Configuration",href:"/admin/email-config",icon:"\uD83D\uDCE7"}].map(e=>{let s=c.pathname===e.href||"/admin"!==e.href&&c.pathname.startsWith(e.href);return(0,a.jsx)("li",{children:(0,a.jsxs)(i(),{href:e.href,className:"flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(s?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),children:[(0,a.jsx)("span",{className:"mr-3",children:e.icon}),e.label]})},e.href)})})})}),(0,a.jsxs)("main",{className:"flex-1",children:[d.length>0&&(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-3",children:(0,a.jsx)("nav",{className:"flex","aria-label":"Breadcrumb",children:(0,a.jsxs)("ol",{className:"flex items-center space-x-2",children:[(0,a.jsx)("li",{children:(0,a.jsx)(i(),{href:"/admin",className:"text-gray-500 hover:text-gray-700",children:"Dashboard"})}),d.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"flex-shrink-0 h-4 w-4 text-gray-400 mx-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.href?(0,a.jsx)(i(),{href:e.href,className:"text-gray-500 hover:text-gray-700",children:e.label}):(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:e.label})]},s))]})})}),(0,a.jsxs)("div",{className:"p-6",children:[n&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:n})}),t]})]})]})]})}},9630:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return c},default:function(){return o}});var a=t(5893),r=t(6197),l=t(7294),n=t(1664),i=t.n(n),d=t(1163),c=!0;function o(){(0,d.useRouter)();let[e,s]=(0,l.useState)([]),[t,n]=(0,l.useState)(!0),[c,o]=(0,l.useState)(""),[x,m]=(0,l.useState)({page:1,limit:10,total:0,pages:0,hasNext:!1,hasPrev:!1}),[h,u]=(0,l.useState)(""),[g,p]=(0,l.useState)(""),[b,v]=(0,l.useState)(""),[j,f]=(0,l.useState)("startDate"),[y,N]=(0,l.useState)("desc"),w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{n(!0);let t=new URLSearchParams({page:e.toString(),limit:x.limit.toString(),search:h,eventType:g,status:b,sortBy:j,sortOrder:y}),a=await fetch("/api/admin/events?".concat(t)),r=await a.json();r.success?(s(r.data.events),m(r.data.pagination)):o("Failed to fetch events")}catch(e){o("Error fetching events"),console.error("Error:",e)}finally{n(!1)}};(0,l.useEffect)(()=>{w()},[h,g,b,j,y]);let E=e=>new Date(e).toLocaleDateString(),D=e=>new Date("2000-01-01T".concat(e)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),C=e=>({DRAFT:"bg-gray-100 text-gray-800",PUBLISHED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800",COMPLETED:"bg-blue-100 text-blue-800"})[e]||"bg-gray-100 text-gray-800",S=e=>({ASSEMBLY:"Assembly",CONVENTION:"Convention",CIRCUIT_OVERSEER_VISIT:"CO Visit",SPECIAL_EVENT:"Special Event",MEETING:"Meeting",MEMORIAL:"Memorial",OTHER:"Other"})[e]||e;return(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Events Management"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Manage events, assignments, and attendant scheduling"})]}),(0,a.jsx)(i(),{href:"/admin/events/create",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"➕ Create Event"})]})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),w(1)},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,a.jsx)("input",{type:"text",id:"search",value:h,onChange:e=>u(e.target.value),placeholder:"Search events...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"eventType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),(0,a.jsxs)("select",{id:"eventType",value:g,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Types"}),(0,a.jsx)("option",{value:"ASSEMBLY",children:"Assembly"}),(0,a.jsx)("option",{value:"CONVENTION",children:"Convention"}),(0,a.jsx)("option",{value:"CIRCUIT_OVERSEER_VISIT",children:"CO Visit"}),(0,a.jsx)("option",{value:"SPECIAL_EVENT",children:"Special Event"}),(0,a.jsx)("option",{value:"MEETING",children:"Meeting"}),(0,a.jsx)("option",{value:"MEMORIAL",children:"Memorial"}),(0,a.jsx)("option",{value:"OTHER",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{id:"status",value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Statuses"}),(0,a.jsx)("option",{value:"DRAFT",children:"Draft"}),(0,a.jsx)("option",{value:"PUBLISHED",children:"Published"}),(0,a.jsx)("option",{value:"CANCELLED",children:"Cancelled"}),(0,a.jsx)("option",{value:"COMPLETED",children:"Completed"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sortBy",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,a.jsxs)("select",{id:"sortBy",value:j,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"startDate",children:"Start Date"}),(0,a.jsx)("option",{value:"name",children:"Name"}),(0,a.jsx)("option",{value:"eventType",children:"Type"}),(0,a.jsx)("option",{value:"status",children:"Status"}),(0,a.jsx)("option",{value:"createdAt",children:"Created"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{type:"submit",className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"\uD83D\uDD0D Search"})})]})}),c&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,a.jsx)("p",{className:"text-red-700",children:c})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:t?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading events..."})]}):0===e.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"No events found"}),(0,a.jsx)(i(),{href:"/admin/events/create",className:"mt-4 inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Create First Event"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignments"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S(e.eventType)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:E(e.startDate)}),(0,a.jsxs)("div",{className:"text-gray-500",children:[D(e.startTime),e.endTime&&" - ".concat(D(e.endTime))]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,a.jsx)("div",{className:"max-w-xs truncate",children:e.location})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(C(e.status)),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:[e._count.assignments," assigned"]}),(0,a.jsxs)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:[e._count.event_positions," positions"]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,a.jsx)(i(),{href:"/admin/events/".concat(e.id),className:"text-blue-600 hover:text-blue-900 transition-colors",children:"\uD83D\uDCCB Manage"}),(0,a.jsx)(i(),{href:"/admin/events/".concat(e.id,"/edit"),className:"text-green-600 hover:text-green-900 transition-colors",children:"✏️ Edit"})]})]},e.id))})]})}),x.pages>1&&(0,a.jsx)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing page ",x.page," of ",x.pages," (",x.total," total events)"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>w(x.page-1),disabled:!x.hasPrev,className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Previous"}),(0,a.jsx)("span",{className:"px-3 py-1 text-sm bg-blue-600 text-white rounded",children:x.page}),(0,a.jsx)("button",{onClick:()=>w(x.page+1),disabled:!x.hasNext,className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Next"})]})]})})]})}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)(i(),{href:"/admin/events/create",className:"flex flex-col items-center space-y-2 p-4 rounded-lg border border-gray-200 hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"➕"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Create Event"})]}),(0,a.jsxs)("button",{onClick:()=>w(x.page),className:"flex flex-col items-center space-y-2 p-4 rounded-lg border border-gray-200 hover:border-gray-500 hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD04"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Refresh"})]}),(0,a.jsxs)(i(),{href:"/admin/events/import",className:"flex flex-col items-center space-y-2 p-4 rounded-lg border border-gray-200 hover:border-green-500 hover:bg-green-50 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCE5"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Import Events"})]}),(0,a.jsxs)(i(),{href:"/admin/events/reports",className:"flex flex-col items-center space-y-2 p-4 rounded-lg border border-gray-200 hover:border-purple-500 hover:bg-purple-50 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Reports"})]})]})]})})}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=5378)}),_N_E=e.O()}]);