(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{235:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events/select",function(){return s(8397)}])},8397:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return o},default:function(){return d}});var n=s(5893),r=s(3299),a=s(7294),l=s(1163),i=s(1664),c=s.n(i),o=!0;function d(){var e,t,s;let{data:i}=(0,r.useSession)(),o=(0,l.useRouter)(),[d,u]=(0,a.useState)([]),[x,m]=(0,a.useState)(!0),[h,b]=(0,a.useState)("");(0,a.useEffect)(()=>{g()},[]);let g=async()=>{try{b("");let e=await fetch("/api/events?includeStats=true"),t=await e.json();if(t.success){if(u(t.data.events),t.data.currentEvent){o.push("/event/".concat(t.data.currentEvent.id,"/dashboard"));return}}else b("Failed to load events")}catch(e){b("Error loading events"),console.error("Error fetching events:",e)}finally{m(!1)}},v=async e=>{try{(await fetch("/api/events/select",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:e})})).ok?o.push("/event/".concat(e,"/dashboard")):b("Failed to select event")}catch(e){b("Error selecting event"),console.error("Error selecting event:",e)}},p=e=>{switch(e){case"current":return"bg-green-100 text-green-800 border-green-200";case"upcoming":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=e=>{switch(e){case"current":return"\uD83D\uDFE2";case"upcoming":return"\uD83D\uDD35";case"past":return"⚪";default:return"❓"}};return x?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-white text-lg",children:"Loading events..."})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-white mb-4",children:"\uD83C\uDFAF Select Event"}),(0,n.jsx)("p",{className:"text-blue-100 text-lg",children:"Choose which event you'd like to work with"}),(null==i?void 0:null===(e=i.user)||void 0===e?void 0:e.name)&&(0,n.jsxs)("p",{className:"text-blue-200 mt-2",children:["Welcome back, ",i.user.name,"!"]})]}),h&&(0,n.jsx)("div",{className:"max-w-2xl mx-auto mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:h}),(0,n.jsx)("div",{className:"max-w-6xl mx-auto",children:0===d.length?(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md mx-auto",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC5"}),(0,n.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Events Available"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"There are no events available for you to select."}),(null==i?void 0:null===(t=i.user)||void 0===t?void 0:t.role)==="ADMIN"&&(0,n.jsx)(c(),{href:"/admin/events",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create New Event"})]})}):(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>v(e.id),children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full border ".concat(p(e.status)),children:[f(e.status)," ",e.status.toUpperCase()]}),(0,n.jsx)("span",{className:"text-sm text-gray-500",children:e.eventType})]}),(0,n.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.name}),e.description&&(0,n.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),(0,n.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,n.jsx)("span",{className:"mr-2",children:"\uD83D\uDCC5"}),new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),(0,n.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,n.jsx)("span",{className:"mr-2",children:"\uD83D\uDCCD"}),e.location]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[(0,n.jsxs)("span",{children:["\uD83D\uDC65 ",e.attendantsCount," attendants"]}),(0,n.jsxs)("span",{children:["\uD83D\uDCCB ",e.positionsCount," positions"]})]}),(0,n.jsx)("button",{onClick:t=>{t.stopPropagation(),v(e.id)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Select Event"})]})},e.id))})}),(null==i?void 0:null===(s=i.user)||void 0===s?void 0:s.role)==="ADMIN"&&(0,n.jsxs)("div",{className:"text-center mt-8",children:[(0,n.jsx)(c(),{href:"/admin",className:"inline-flex items-center px-6 py-3 bg-white text-blue-600 font-medium rounded-lg hover:bg-gray-50 transition-colors mr-4",children:"\uD83D\uDEE1️ Admin Dashboard"}),(0,n.jsx)(c(),{href:"/events",className:"inline-flex items-center px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition-colors",children:"\uD83D\uDCC5 Manage Events"})]})]})})}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=235)}),_N_E=e.O()}]);