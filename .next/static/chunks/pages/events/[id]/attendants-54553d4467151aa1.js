(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{9781:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events/[id]/attendants",function(){return s(4535)}])},5083:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(5893),l=s(3299),r=s(1664),n=s.n(r),i=s(1163);function d(e){var t;let{children:s,title:r="JW Attendant Scheduler",breadcrumbs:d=[],selectedEvent:c}=e,{data:o}=(0,l.useSession)(),m=(0,i.useRouter)(),x=[{label:"Events",href:"/events",icon:"\uD83D\uDCC5",roles:["ADMIN","OVERSEER","ATTENDANT"]},{label:"Event Selection",href:"/events/select",icon:"\uD83C\uDFAF",roles:["ADMIN","OVERSEER","ATTENDANT"]}];(null==o?void 0:null===(t=o.user)||void 0===t?void 0:t.role)==="ADMIN"&&x.push({label:"Admin Portal",href:"/admin",icon:"\uD83D\uDEE1️",roles:["ADMIN"]});let u=x.filter(e=>{var t;return e.roles.includes((null==o?void 0:null===(t=o.user)||void 0===t?void 0:t.role)||"")});return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(n(),{href:"/events/select",className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:"\uD83D\uDCCB"}),(0,a.jsx)("span",{className:"ml-2 text-xl font-semibold text-gray-900",children:"JW Attendant Scheduler"})]}),(0,a.jsx)("div",{className:"hidden md:ml-8 md:flex md:space-x-4",children:u.map(e=>(0,a.jsxs)(n(),{href:e.href,className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(m.pathname.startsWith(e.href)?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.href))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[c&&(0,a.jsxs)("div",{className:"hidden md:flex items-center bg-blue-50 px-3 py-1 rounded-lg",children:[(0,a.jsxs)("span",{className:"text-sm text-blue-600 font-medium",children:["\uD83D\uDCC5 ",c.name]}),c.status&&(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full ".concat("current"===c.status?"bg-green-100 text-green-800":"upcoming"===c.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:c.status})]}),(null==o?void 0:o.user)&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:o.user.name}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("ADMIN"===o.user.role?"bg-red-100 text-red-800":"OVERSEER"===o.user.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:o.user.role}),(0,a.jsx)("button",{onClick:()=>{(0,l.signOut)({callbackUrl:"/auth/signin"})},className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Sign Out"})]})]})]})})}),d.length>0&&(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:(0,a.jsx)("nav",{className:"flex","aria-label":"Breadcrumb",children:(0,a.jsx)("ol",{className:"flex items-center space-x-2",children:d.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center",children:[t>0&&(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400 mx-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.href?(0,a.jsx)(n(),{href:e.href,className:"text-sm text-blue-600 hover:text-blue-800",children:e.label}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.label})]},t))})})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r&&(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:r})}),s]})]})}},4535:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return i},default:function(){return d}});var a=s(5893),l=s(5083),r=s(7294),n=s(1163),i=!0;function d(e){let{eventId:t,event:s,attendants:i,stats:d}=e,c=(0,n.useRouter)(),[o,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[b,f]=(0,r.useState)(null),[p,v]=(0,r.useState)(null),[y,N]=(0,r.useState)(new Set),[j,w]=(0,r.useState)({isActive:"",congregation:"",formsOfService:""}),[S,k]=(0,r.useState)({search:"",congregation:"",isActive:"all"}),[A,C]=(0,r.useState)(1),[E,O]=(0,r.useState)(!1),[D,I]=(0,r.useState)(null),[T,R]=(0,r.useState)({firstName:"",lastName:"",email:"",phone:"",congregation:"",formsOfService:"",notes:"",isActive:!0}),F=()=>{R({firstName:"",lastName:"",email:"",phone:"",congregation:"",formsOfService:"",notes:"",isActive:!0}),f(null),m(!0)},P=e=>{R({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone||"",congregation:e.congregation||"",formsOfService:Array.isArray(e.formsOfService)?e.formsOfService.join(", "):e.formsOfService||"",notes:"",isActive:e.isActive}),f(e),m(!0)},_=async e=>{e.preventDefault(),O(!0);try{let e=b?"/api/events/".concat(t,"/attendants/").concat(b.associationId):"/api/events/".concat(t,"/attendants"),s=await fetch(e,{method:b?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(s.ok)m(!1),c.reload();else{let e=await s.json();alert(e.error||"Failed to save attendant")}}catch(e){console.error("Error saving attendant:",e),alert("Failed to save attendant")}finally{O(!1)}},U=async e=>{if(confirm("Are you sure you want to remove ".concat(e.firstName," ").concat(e.lastName,"?"))){O(!0);try{let s=await fetch("/api/events/".concat(t,"/attendants/").concat(e.associationId),{method:"DELETE"});if(s.ok)c.reload();else{let e=await s.json();alert(e.error||"Failed to remove attendant")}}catch(e){console.error("Error removing attendant:",e),alert("Failed to remove attendant")}finally{O(!1)}}},z=async()=>{if(p){O(!0);try{let e=(await p.text()).split("\n").filter(e=>e.trim());if(e.length<2){alert("CSV file must have at least a header row and one data row");return}let s=e[0].split(",").map(e=>e.trim().replace(/"/g,"")),a=[];for(let t=1;t<e.length;t++){let l=e[t].split(",").map(e=>e.trim().replace(/"/g,"")),r={};s.forEach((e,t)=>{let s=l[t]||"";switch(e.toLowerCase()){case"firstname":r.firstName=s;break;case"lastname":r.lastName=s;break;case"email":r.email=s;break;case"phone":r.phone=s;break;case"congregation":r.congregation=s;break;case"formsofservice":r.formsOfService=s;break;case"notes":r.notes=s;break;case"isactive":r.isActive="true"===s.toLowerCase()}}),r.firstName&&r.lastName&&r.email&&a.push(r)}if(0===a.length){alert("No valid attendant records found in CSV");return}let l=await fetch("/api/events/".concat(t,"/attendants"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({attendants:a})}),r=await l.json();r.success?(I(r.data),u(!1),c.reload(),alert("Successfully imported ".concat(a.length," attendants"))):alert("Import failed: ".concat(r.error))}catch(e){console.error("Import error:",e),alert("Failed to parse CSV file. Please check the format.")}finally{O(!1)}}},L=e=>{let t=new Set(y);t.has(e)?t.delete(e):t.add(e),N(t)},M=async()=>{if(0!==y.size){O(!0);try{let e=[];for(let s of y){let a={};""!==j.isActive&&(a.isActive="true"===j.isActive),""!==j.congregation&&(a.congregation=j.congregation),""!==j.formsOfService&&(a.formsOfService=j.formsOfService),Object.keys(a).length>0&&e.push(fetch("/api/events/".concat(t,"/attendants/").concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}))}await Promise.all(e),g(!1),N(new Set),w({isActive:"",formsOfService:"",congregation:""}),c.reload()}catch(e){console.error("Bulk edit error:",e),alert("Failed to update attendants")}finally{O(!1)}}};return(0,a.jsx)(l.Z,{title:"".concat(s.name," - Attendants | JW Attendant Scheduler"),breadcrumbs:[{label:"Events",href:"/events"},{label:s.name,href:"/events/".concat(t)},{label:"Attendants"}],selectedEvent:{id:t,name:s.name,status:s.status},children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Event Attendants"}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Manage attendants for ",s.name]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>c.push("/events/".concat(t)),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition-colors",children:"← Back to Event"}),(0,a.jsx)("button",{onClick:F,disabled:E,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-bold py-2 px-4 rounded transition-colors",children:"➕ Add Attendant"}),(0,a.jsx)("button",{onClick:()=>{u(!0),v(null),I(null)},disabled:E,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-bold py-2 px-4 rounded transition-colors",children:"\uD83D\uDCE5 Import Attendants"}),y.size>0&&(0,a.jsxs)("button",{onClick:()=>{if(0===y.size){alert("Please select attendants to edit");return}g(!0)},disabled:E,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-bold py-2 px-4 rounded transition-colors",children:["✏️ Bulk Edit (",y.size,")"]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:d.total})})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Attendants"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:d.total})]})})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:d.active})})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Active"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:d.active})]})})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:d.inactive})})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Inactive"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:d.inactive})]})})]})})})]}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Attendants List"}),0===i.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"No attendants found for this event"}),(0,a.jsx)("button",{onClick:F,disabled:E,className:"mt-4 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-bold py-2 px-4 rounded transition-colors",children:"Add First Attendant"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)("input",{type:"checkbox",checked:y.size===i.length&&i.length>0,onChange:()=>{y.size===i.length?N(new Set):N(new Set(i.map(e=>e.associationId)))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Congregation"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Forms of Service"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:y.has(e.associationId),onChange:()=>L(e.associationId),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.email})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.congregation||"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:(Array.isArray(e.formsOfService)?e.formsOfService:(e.formsOfService||"").toString().split(", ").filter(e=>e.trim())).map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("Overseer"===e?"bg-purple-100 text-purple-800":"Keyman"===e?"bg-blue-100 text-blue-800":"Elder"===e?"bg-yellow-100 text-yellow-800":"Ministerial Servant"===e?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e},t))})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>P(e),disabled:E,className:"text-blue-600 hover:text-blue-900 disabled:text-blue-400 mr-3",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>U(e),disabled:E,className:"text-red-600 hover:text-red-900 disabled:text-red-400",children:"Remove"})]})]},e.id))})]})})]})}),o&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:b?"Edit Attendant":"Add New Attendant"}),(0,a.jsxs)("form",{onSubmit:_,children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name *"}),(0,a.jsx)("input",{type:"text",required:!0,value:T.firstName,onChange:e=>R({...T,firstName:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name *"}),(0,a.jsx)("input",{type:"text",required:!0,value:T.lastName,onChange:e=>R({...T,lastName:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email *"}),(0,a.jsx)("input",{type:"email",required:!0,value:T.email,onChange:e=>R({...T,email:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,a.jsx)("input",{type:"tel",value:T.phone,onChange:e=>R({...T,phone:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Congregation"}),(0,a.jsx)("input",{type:"text",value:T.congregation,onChange:e=>R({...T,congregation:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter congregation name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Forms of Service *"}),(0,a.jsx)("div",{className:"mt-2 space-y-2",children:["Elder","Ministerial Servant","Regular Pioneer","Overseer","Keyman","Other Dept."].map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:T.formsOfService.split(", ").filter(e=>e.trim()).includes(e),onChange:t=>{let s=T.formsOfService.split(", ").filter(e=>e.trim());t.target.checked?R({...T,formsOfService:[...s,e].join(", ")}):R({...T,formsOfService:s.filter(t=>t!==e).join(", ")})},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},e))}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Select all applicable forms of service. Overseers manage Keymen and Attendants. Keymen manage groups of Attendants."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,a.jsx)("textarea",{value:T.notes,onChange:e=>R({...T,notes:e.target.value}),rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional notes or comments"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:!1!==T.isActive,onChange:e=>R({...T,isActive:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Active Attendant"})]}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Inactive attendants will not be available for new assignments"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>m(!1),disabled:E,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:bg-gray-100",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-md",children:[E?"Saving...":b?"Update":"Add"," Attendant"]})]})]})]})})}),x&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Import Attendants"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Upload a CSV file with attendant information."}),(0,a.jsx)("button",{onClick:()=>{let e=new Blob(['firstName,lastName,email,phone,congregation,formsOfService,notes,isActive\nJohn,Doe,john.doe@example.com,555-1234,Central Congregation,"Elder, Overseer",,true\nJane,Smith,jane.smith@example.com,555-5678,North Congregation,"Ministerial Servant, Keyman",,true\nBob,Johnson,bob.johnson@example.com,,South Congregation,"Regular Pioneer",,true'],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="attendants-import-template.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(t)},className:"text-blue-600 hover:text-blue-800 text-sm underline",children:"\uD83D\uDCE5 Download CSV Template"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select CSV File"}),(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&"text/csv"===s.type?v(s):alert("Please select a valid CSV file")},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),p&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded",children:(0,a.jsxs)("p",{className:"text-sm text-green-800",children:["✅ File selected: ",p.name]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>u(!1),disabled:E,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:bg-gray-100",children:"Cancel"}),(0,a.jsx)("button",{onClick:z,disabled:E||!p,className:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-md",children:E?"Importing...":"Import Attendants"})]})]})})}),h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Bulk Edit ",y.size," Attendants"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,a.jsxs)("select",{value:j.isActive,onChange:e=>w({...j,isActive:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"No Change"}),(0,a.jsx)("option",{value:"true",children:"Active"}),(0,a.jsx)("option",{value:"false",children:"Inactive"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Congregation"}),(0,a.jsx)("input",{type:"text",value:j.congregation,onChange:e=>w({...j,congregation:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Leave empty for no change"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forms of Service (comma-separated)"}),(0,a.jsx)("input",{type:"text",value:j.formsOfService,onChange:e=>w({...j,formsOfService:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Elder, Overseer (leave empty for no change)"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>g(!1),disabled:E,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:bg-gray-100",children:"Cancel"}),(0,a.jsx)("button",{onClick:M,disabled:E,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white rounded-md",children:E?"Updating...":"Update Attendants"})]})]})})})]})})}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=9781)}),_N_E=e.O()}]);