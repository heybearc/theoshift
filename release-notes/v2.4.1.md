# Release v2.4.1
**Release Date:** October 29, 2025

## Summary
This patch release focuses on improving the Actions dropdown UX on the attendants page and fixing critical API bugs related to Prisma relations and missing ID fields.

## Changes

### üêõ Bug Fixes
- **Fixed Actions dropdown positioning** - Changed from fixed to absolute positioning so dropdown stays attached to button and scrolls naturally with page content
- **Fixed dropdown getBoundingClientRect error** - Resolved null reference error by capturing rect before setTimeout callback
- **Fixed feedback comment API** - Added missing `id` field for feedback_comments creation
- **Fixed feedback attachment API** - Added missing `id` field for feedback_attachments creation
- **Fixed feedback comment relation** - Changed `author` to `users` relation in Prisma query
- **Fixed permissions update API** - Changed `user` to `users` relation in Prisma query

### ‚ú® New Features
- **Click-outside dropdown detection** - Dropdowns now close when clicking anywhere outside
- **Scroll behavior** - Dropdowns automatically close on scroll for better UX
- **Release notification banner** - Added to event selection page (in addition to admin dashboard)

### üîß Improvements
- **Simplified dropdown positioning logic** - Removed complex manual positioning calculations
- **Better dropdown UX** - Dropdowns behave like native browser dropdowns
- **Cleaner code** - Reduced complexity in dropdown event handlers

## Technical Details

### Dropdown Positioning Fix
- Changed from `fixed` to `absolute` positioning
- Removed manual rect calculations and repositioning logic
- Added proper click-outside detection with event listeners
- Dropdowns now close on scroll instead of repositioning

### API Fixes
All Prisma relation naming issues resolved:
1. `event_permissions` - `user` ‚Üí `users`
2. `feedback_comments` - `author` ‚Üí `users`
3. `feedback_comments` - Added `id` field generation
4. `feedback_attachments` - Added `id` field generation

## Deployment
- **Deployed to STANDBY:** October 29, 2025
- **Environment:** Blue (10.92.3.22:3001)
- **Status:** Ready for testing

## Testing Checklist
- [ ] Actions dropdown appears below button
- [ ] Dropdown closes when clicking outside
- [ ] Dropdown closes when scrolling
- [ ] All action buttons work (Set PIN, Force Verify, Edit, Remove)
- [ ] Feedback comments can be added
- [ ] Permissions can be updated
- [ ] No console errors

## Breaking Changes
None

## Known Issues
None

## Contributors
- Cory Allen
- Cascade AI Assistant
